---
---

<button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
  <i class="ph-thin ph-sun" id="theme-icon-light"></i>
  <i class="ph-thin ph-moon" id="theme-icon-dark"></i>
</button>

<script>
  const btn = document.getElementById('theme-toggle');
  const iconLight = document.getElementById('theme-icon-light');
  const iconDark = document.getElementById('theme-icon-dark');

  function getTheme(): string {
    return document.documentElement.getAttribute('data-theme') ||
      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
  }

  function updateIcons() {
    const isDark = getTheme() === 'dark';
    if (iconLight) iconLight.style.display = isDark ? 'none' : 'block';
    if (iconDark) iconDark.style.display = isDark ? 'block' : 'none';
  }

  updateIcons();

  btn?.addEventListener('click', () => {
    const next = getTheme() === 'dark' ? 'light' : 'dark';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    updateIcons();
  });
</script>

<style>
  .theme-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: none;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    cursor: pointer;
    color: var(--ink-light);
    font-size: 1.125rem;
    transition: color var(--dur-fast) var(--ease-out),
                border-color var(--dur-fast) var(--ease-out);
  }

  .theme-toggle:hover {
    color: var(--ink);
    border-color: var(--ink-light);
  }
</style>
