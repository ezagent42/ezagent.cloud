---
import { languages, getOtherLang, type Lang } from '../i18n/ui';

interface Props {
  lang: string;
}

const { lang } = Astro.props;
const otherLang = getOtherLang(lang as Lang);
const currentPath = Astro.url.pathname;
const base = import.meta.env.BASE_URL.replace(/\/$/, '');

// Replace /<base>/<lang>/ with /<base>/<otherLang>/
const otherPath = currentPath.replace(`${base}/${lang}/`, `${base}/${otherLang}/`) || `${base}/${otherLang}/`;
---

<a href={otherPath} class="lang-switch" aria-label={`Switch to ${languages[otherLang]}`}>
  {languages[otherLang]}
</a>

<style>
  .lang-switch {
    display: flex;
    align-items: center;
    padding: var(--sp-1) var(--sp-2);
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--smoke);
    text-decoration: none;
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    transition: color var(--dur-fast) var(--ease-out),
                border-color var(--dur-fast) var(--ease-out);
  }

  .lang-switch:hover {
    color: var(--ink);
    border-color: var(--ink-light);
  }
</style>
